@model FamConnect.Models.DashBoardViewModel

@{
    ViewBag.Title = "Family Connect";
}

<div class="row">

    <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9 familyPictureFrame">
        <div class="familyContent">
            <h1>Family Name</h1>
        </div>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 dashSideNav">
        <div class="nextReward text-center">
            <span class="glyphicon glyphicon-star" aria-hidden="true"></span>
            <h3>NEXT REWARD</h3>
            <h4>@{Html.RenderAction("GetMilestoneValue", "Milestones", new { mVal = "reward" });}</h4>

            <div class="progress">
                <div class="progress-bar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em; width:@{Html.RenderAction("GetPoints", "ConnectionActions");}%;">
                    <h2>@{Html.RenderAction("GetPoints", "ConnectionActions");}<text>&nbsp;</text>/<text>&nbsp;</text>@{Html.RenderAction("GetMilestoneValue", "Milestones", new { mVal = "goal" });}</h2>
                </div>
            </div>

        </div>
        <div class="btn-group-vertical btn-group-lg btn-block" role="group" aria-label="...">
            <a href="@Url.Action("Create", "ConnectionActions")" class="btn btn-primary"><span class="glyphicon glyphicon-edit" aria-hidden="true"></span> Log Connection</a>
            <a href="@Url.Action("Index", "FamilyMembers")" class="btn btn-primary"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> Manage Family</a>
            <a href="@Url.Action("Create", "Milestones")" class="btn btn-primary"><span class="glyphicon glyphicon-flag" aria-hidden="true"></span> Create Milestone</a>
        </div>
    </div>
</div>

<table class="table-striped table table-hover">
    <thead>
        <tr>
            <th>Connection</th>
            <th>Member</th>
            <th>Points Earned</th>
            <th>Date</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var action in Model.ConnectionActions)
        {
            if (action.UserId == Model.FamilyID)
            {
                <tr>
                    <td>@action.ConnectionActionDescription</td>
                    <td><img class="img-circle smallProfileImg" src="@action.FamilyMember.PathToMemberPhoto" alt="@action.FamilyMember.FirstName" /> @action.FamilyMember.FirstName</td>
                    <td>@action.PointsEarned</td>
                    <td>@action.ConnectionActionDate</td>
                </tr>
            }
        }
    </tbody>
</table>


